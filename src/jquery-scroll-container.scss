/***********************************************
    jquery-scroll-container.scss, 

    (c) 2017, FCOO

    https://github.com/FCOO/jquery-scroll-container
    https://github.com/FCOO

    USING MODIFIED VERSIONS OF THE STYLE 
    FROM PERFECT-SCROLLBAR
    https://github.com/noraesae/perfect-scrollbar

************************************************/
//BOURBON - http://bourbon.io/
@import "../bower_components/bourbon/app/assets/stylesheets/bourbon";



@import "jquery-scroll-container-variables";


/****************************************************
*****************************************************
SHAPE AND POSITION
*****************************************************
****************************************************/
$scrollbar-z-index: 1000;
.ps { /*1*/
    position: relative; 

    -ms-touch-action  : auto;
    touch-action      : auto;
    overflow          : hidden !important;
    -ms-overflow-style: none;

    // Edge
    @supports (-ms-overflow-style: none) {
        overflow: auto !important;
    }
    // IE10+
    @media screen and (-ms-high-contrast: active), (-ms-high-contrast: none) {
        overflow: auto !important;
    }

    //Rail for active scrollbars
    &.ps--active-x > .ps__scrollbar-x-rail,
    &.ps--active-y > .ps__scrollbar-y-rail {
        display         : block;
    }

    //RAIL: Common for both rails
    > .ps__scrollbar-x-rail, > .ps__scrollbar-y-rail {
        display : none;
        position: absolute; 
    }

    //BAR + BAR-BG: Common for both bars
    > .ps__scrollbar-x-rail > .ps__scrollbar-x, 
    > .ps__scrollbar-x-rail > .ps__scrollbar-x-bg, 
    > .ps__scrollbar-y-rail > .ps__scrollbar-y,
    > .ps__scrollbar-y-rail > .ps__scrollbar-y-bg {
        position       : absolute; 
        z-index        : $scrollbar-z-index; 
        background-clip: content-box;
        box-sizing     : border-box;
        padding        : $scrollbar-margin; 

        //:after gives the shape and color
        &:after {
            display      : block;
            box-sizing   : border-box;
            width        : 100%; 
            height       : 100%; 
            content      : ""; 
            border-radius: $scrollbar-size / 2;
            transition: background-color .2s linear, height .2s linear, width .2s ease-in-out, border-radius .2s ease-in-out;
        }
    }

    //HORIZONTAL: Size and position
    //RAIL
    > .ps__scrollbar-x-rail {
        bottom: 0; 
        height: $scroll-size;

        //BAR + BAR-BG
        > .ps__scrollbar-x,
        > .ps__scrollbar-x-bg {
            bottom: 0; 
            height: $scroll-size; 

            //Adjust padding-width
            padding-left : 0; 
            padding-right: 0;
        }
        //BAR-BG
        > .ps__scrollbar-x-bg { 
            width : 100%; 
        }
    }

    //VERTICAL: Size and position
    //RAIL
    > .ps__scrollbar-y-rail {
        right: 0; 
        width: $scroll-size;

        //BAR + BAR-BG
        > .ps__scrollbar-y,
        > .ps__scrollbar-y-bg {
            right: 0; 
            width: $scroll-size;

            //Adjust padding-width
            padding-top   : 0; 
            padding-bottom: 0;
        }

        //BAR-BG
        > .ps__scrollbar-y-bg { 
            height: 100%; 
        }
    }
} //end of .ps /*1*/ 

/****************************************************
*****************************************************
COLOR AND OPACITY
*****************************************************
****************************************************/
@mixin scrollbar-background( $opacity ){
    &:after {
        background-color: rgba(0,0,0, $opacity);
    }
}

@mixin scrollbar-bar( $bg-color ){
    &:after {
        background-color: #{$bg-color};
        opacity: 1; 
    }
}

@mixin extended( $horizontal ){
    @if ($horizontal){
        padding-top   : $scrollbar-margin-extended; 
        padding-bottom: $scrollbar-margin-extended; 
    }
    @else {
        padding-left : $scrollbar-margin-extended; 
        padding-right: $scrollbar-margin-extended; 
    }
    &:after {
        border-radius: $scrollbar-size-extended / 2;
    }
}

/*Normal*/
.ps {
    .ps__scrollbar-x, .ps__scrollbar-y,
    .ps__scrollbar-x-bg, .ps__scrollbar-y-bg {
        transition: padding .2s ease-in-out;
        &:after {
            transition: opacity .2s ease-in-out, background-color .2s ease-in-out, padding .2s ease-in-out, border-radius .2s ease-in-out;
        }
    }

    //BAR
    .ps__scrollbar-x, .ps__scrollbar-y { 
        @include scrollbar-background(.2) 
    } 

    //BAR-BG
    .ps__scrollbar-x-bg, .ps__scrollbar-y-bg { 
        @include scrollbar-background(0) 
    }
}

//Hover content and bar or scrolling contents - but only for non toush devices
.no-touchevents {
    .ps {
        /* Hover content */
        &:hover {
            //BAR
            .ps__scrollbar-x, .ps__scrollbar-y { 
                @include scrollbar-background(.29) 
            }
            //BAR-BG
            .ps__scrollbar-x-bg, .ps__scrollbar-y-bg { 
                @include scrollbar-background(0.15) 
            }
        }

        /* Hover scrollbar (bar or bar-bg) */
        //BAR
        .ps__scrollbar-x-bg:hover ~ .ps__scrollbar-x, .ps__scrollbar-x:hover {
            @include scrollbar-bar('#8F8F8F');
            @include extended(true);
        }
        .ps__scrollbar-y-bg:hover ~ .ps__scrollbar-y, .ps__scrollbar-y:hover  {
            @include scrollbar-bar('#8F8F8F');
            @include extended(false);
        }

        /* Dragging scrollbar */
        &.ps--in-scrolling  {
            //BAR
            .ps__scrollbar-x { 
                @include scrollbar-bar('#616161');
                @include extended(true);

            }
            .ps__scrollbar-y { 
                @include scrollbar-bar('#616161');
                @include extended(false);
            }
            //BAR-BG
            .ps__scrollbar-x-bg, .ps__scrollbar-y-bg { 
                @include scrollbar-background(.3); 
            }
        }
    }
}


//Container with contents
.jquery-scroll-container {
    //Move content over scrollbars
    position: relative;
    z-index : $scrollbar-z-index + 1;

    background-color: transparent;
    padding: 0;
    margin : 0;

    .scrollbar-horizontal & /*, .scrollbar-both &*/ {
        padding-left : $scroll-shadow-size;
        padding-right: $scroll-shadow-size;
        margin-top   : $scroll-shadow-size; 
        margin-bottom: $scroll-size; 

        & > *:first-child {
            margin-left: 0 !important;
        }
        & > *:last-child {
            margin-right: 0 !important;
        }
    }

    .scrollbar-vertical & /*, .scrollbar-both & */ {
        padding-top   : $scroll-shadow-size;
        padding-bottom: $scroll-shadow-size;
        margin-left   : $scroll-size; 
        margin-right  : $scroll-size; 

        & > *:first-child {
            margin-top: 0 !important;
        }
        & > *:last-child {
            margin-bottom: 0 !important;
        }
    }
}




//Adding shadow at the top/bottom using the rails. Using :before and :after to allow inner shadow on <ul>-<li>
.ps { /*2*/
    //Extend rail to full width/height
    .ps__scrollbar-y-rail { width : 100%; }
    .ps__scrollbar-x-rail { height: 100%; }


    $shadow-color   : rgba(0,0,0,0.5);
    $no-shadow-color: rgba(0,0,0,0);
    $shadow-size    : 1.5 * $scroll-shadow-size; 
    $spread         : -1 * $scroll-shadow-size;

    $top-shadow      : inset 0    $shadow-size $shadow-size $spread $shadow-color;
    $no-top-shadow   : inset 0    $shadow-size $shadow-size $spread $no-shadow-color;
    $bottom-shadow   : inset 0 -1*$shadow-size $shadow-size $spread $shadow-color;
    $no-bottom-shadow: inset 0 -1*$shadow-size $shadow-size $spread $no-shadow-color;

    $left-shadow     : inset    $shadow-size 0 $shadow-size $spread $shadow-color;
    $no-left-shadow  : inset    $shadow-size 0 $shadow-size $spread $no-shadow-color;
    $right-shadow    : inset -1*$shadow-size 0 $shadow-size $spread $shadow-color;
    $no-right-shadow : inset -1*$shadow-size 0 $shadow-size $spread $no-shadow-color;


    //Common style
    .ps__scrollbar-x-rail, .ps__scrollbar-y-rail {
        &:before, &:after{ 
            content   : "";
            position  : absolute;
            display   : none;
            background: transparent;
            z-index   : 10000;
            transition: box-shadow 0.1s linear;
        }
    }

    //Horizontal scrolling => shadow to the left and/or right
    &.scrollbar-horizontal {
        .ps__scrollbar-x-rail{
            //Position
            &:before, &:after {
                top   : $scroll-shadow-size;  
                bottom: $scroll-size;
                width : $shadow-size;
            }
            &:before { left : 0; }
            &:after  { right: 0; }

            //Show shadow
            &.shadow-left:before { 
                display   : inline-block;
                box-shadow: $left-shadow, $no-right-shadow;    
            }

            &.shadow-right:after { 
                display   : inline-block;
                box-shadow: $no-left-shadow, $right-shadow;    
            }
        }
    }

    //Vertical scrolling => shadow at the top and/or bottom
    &.scrollbar-vertical {
        .ps__scrollbar-y-rail{
            //Position
            &:before, &:after {
                left  : $scroll-size; 
                right : $scroll-size; 
                height: $shadow-size;
            }
            &:before { top   : 0; }
            &:after  { bottom: 0; }
        
            //Show shadow
            &.shadow-top:before { 
                display   : inline-block;
                box-shadow: $top-shadow, $no-bottom-shadow;    
            }

            &.shadow-bottom:after { 
                display   : inline-block;
                box-shadow: $no-top-shadow, $bottom-shadow;    
            }
        }
    }
} //end of .ps /*2*/

